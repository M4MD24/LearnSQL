[//]: # (Notes)

# الفرق بين WHERE و ON و HAVING

في SQL، يتم استخدام **`WHERE`** و **`ON`** و **`HAVING`** لتصفية البيانات، ولكن لكل منها استخدام معين حسب توقيت ومرحلة التنفيذ في الاستعلام. الفرق الأساسي يكمن في المكان الذي تُطبّق فيه التصفية:

---

## 1. **`WHERE`**:

- **التوقيت**: يتم تطبيق الشرط قبل عملية التجميع (`GROUP BY`) أو الربط (`JOIN`).
- **الاستخدام**: لتصفية الصفوف الفردية في الجدول بناءً على شرط معين.
- **لا يدعم**: استخدام دوال التجميع مثل `SUM` و`COUNT` مباشرة.
- **مثال**:
  لديك جدول موظفين، وتريد استخراج الموظفين ذوي الرواتب أكبر من 5000.

```sql
SELECT *
FROM Employees
WHERE Salary > 5000;
```

---

## 2. **`ON`**:

- **التوقيت**: يتم تطبيقه أثناء عملية الربط (`JOIN`) بين الجداول.
- **الاستخدام**: لتحديد العلاقة بين الجداول عند استخدام `JOIN`.
- **مثال**:
  لديك جدول موظفين وجدول مشاريع، وتريد استخراج البيانات المشتركة بناءً على المعرف (`EmployeeID`):

```sql
SELECT e.Name, p.ProjectName
FROM Employees e
         JOIN Projects p ON e.EmployeeID = p.EmployeeID;
```

---

## 3. **`HAVING`**:

- **التوقيت**: يتم تطبيق الشرط بعد عملية التجميع (`GROUP BY`).
- **الاستخدام**: لتصفية المجموعات (نتائج التجميع) بناءً على شرط معين.
- **يدعم**: استخدام دوال التجميع مثل `SUM`, `COUNT`.
- **مثال**:
  تريد استخراج الأقسام التي لديها مجموع الرواتب أكبر من 20000.

```sql
SELECT Department, SUM(Salary) AS TotalSalary
FROM Employees
GROUP BY Department
HAVING SUM(Salary) > 20000;
```

---

## ملخص الفرق:

|       **العنصر**       |       **WHERE**        |          **ON**           |       **HAVING**        |
|:----------------------:|:----------------------:|:-------------------------:|:-----------------------:|
|      **التوقيت**       |   قبل التجميع/الربط    |        أثناء الربط        |       بعد التجميع       |
|      **يعمل على**      |     الصفوف الفردية     |        ربط الجداول        |        المجموعات        |
| **يدعم دوال التجميع؟** |           لا           |            لا             |           نعم           |
| **الاستخدام الرئيسي**  | تصفية البيانات الأولية | تحديد العلاقة بين الجداول | تصفية النتائج المُجمّعة |

---

## مثال شامل:

### جدول الموظفين: **Employees**

| EmployeeID | Name    | Department | Salary |
|------------|---------|------------|--------|
| 1          | Alice   | IT         | 5000   |
| 2          | Bob     | HR         | 3000   |
| 3          | Charlie | IT         | 7000   |
| 4          | David   | HR         | 4000   |

### جدول المشاريع: **Projects**

| ProjectID | ProjectName | EmployeeID |
|-----------|-------------|------------|
| 1         | ProjectA    | 1          |
| 2         | ProjectB    | 3          |

#### استعلام مركّب:

```sql
SELECT e.Department, SUM(e.Salary) AS TotalSalary
FROM Employees e
         JOIN Projects p ON e.EmployeeID = p.EmployeeID
WHERE e.Salary > 4000
GROUP BY e.Department
HAVING SUM(e.Salary) > 10000;
```

#### **الشرح**:

1. **`ON`**: يربط جدول الموظفين مع جدول المشاريع بناءً على `EmployeeID`.
2. **`WHERE`**: يُبقي الموظفين ذوي الرواتب الأكبر من 4000 فقط.
3. **`GROUP BY`**: يجمع البيانات حسب القسم.
4. **`HAVING`**: يُبقي الأقسام التي مجموع رواتبها يتجاوز 10000.